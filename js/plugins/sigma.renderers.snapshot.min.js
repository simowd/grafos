(function(e){if("undefined"==typeof sigma)throw"sigma.renderers.snapshot: sigma not in scope.";var t=["scene","edges","nodes","labels"],n={png:"image/png",jpg:"image/jpeg",gif:"image/gif",tiff:"image/tiff"};function a(a){if((a=a||{}).format&&!(a.format in n))throw Error('sigma.renderers.snaphot: unsupported format "'+a.format+'".');var i=this,r=this instanceof sigma.renderers.webgl,o=[],s=document.createElement("canvas"),d=s.getContext("2d"),g=!1;t.forEach(function(e){var t,n;i.contexts[e]&&(!1===a.labels&&"labels"===e||(t=i.domElements[e]||i.domElements.scene,n=i.contexts[e],~o.indexOf(n)||(g||(s.width=r&&n instanceof WebGLRenderingContext?t.width/2:t.width,s.height=r&&n instanceof WebGLRenderingContext?t.height/2:t.height,g=!0,a.background&&(d.rect(0,0,s.width,s.height),d.fillStyle=a.background,d.fill())),n instanceof WebGLRenderingContext?d.drawImage(t,0,0,t.width/2,t.height/2):d.drawImage(t,0,0),o.push(n))))});var e=s.toDataURL(n[a.format||"png"]);return a.download&&function(e,t,n){var a=document.createElement("a");a.setAttribute("href",e),a.setAttribute("download",n||"graph."+t);var i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(i),delete a}(e,a.format||"png",a.filename),delete d,delete s,delete o,e}sigma.renderers.canvas.prototype.snapshot=a,sigma.renderers.webgl.prototype.snapshot=a}).call(this);