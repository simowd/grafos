(function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.classes.graph.addMethod("HITS",function(i){var h,t={},d=[],r=[],a=this.nodes(),o=(a.length,{});for(var u in i=i||!1,a)i?(d.push(a[u]),r.push(a[u])):(0<this.degree(a[u].id,"out")&&d.push(a[u]),0<this.degree(a[u].id,"in")&&r.push(a[u])),t[a[u].id]={authority:1,hub:1};for(;;){h=!0;var e=0,s=0;for(var u in r){o[r[u].id]={authority:1,hub:0};for(var n in i?this.allNeighborsIndex[r[u].id]:this.inNeighborsIndex[r[u].id])n!=r[u].id&&(o[r[u].id].authority+=t[n].hub);e+=o[r[u].id].authority}for(var u in d){o[d[u].id]?o[d[u].id].hub=1:o[d[u].id]={authority:0,hub:1};for(var n in i?this.allNeighborsIndex[d[u].id]:this.outNeighborsIndex[d[u].id])n!=d[u].id&&(o[d[u].id].hub+=t[n].authority);s+=o[d[u].id].hub}for(var u in r)o[r[u].id].authority/=e,1e-4<=Math.abs((o[r[u].id].authority-t[r[u].id].authority)/t[r[u].id].authority)&&(h=!1);for(var u in d)o[d[u].id].hub/=s,1e-4<=Math.abs((o[d[u].id].hub-t[d[u].id].hub)/t[d[u].id].hub)&&(h=!1);if(t=o,o={},h)break}return t})}).call(window);