(function(n){"use strict";var p={getModelTags:function(e){for(var t=e.getElementsByTagName("attributes"),i={},r=t.length,n=0;n<r;n++)i[t[n].getAttribute("class")]=t[n].childNodes;return i},nodeListToArray:function(e){for(var t=[],i=0,r=e.length;i<r;++i)"#text"!==e[i].nodeName&&t.push(e[i]);return t},nodeListEach:function(e,t){for(var i=0,r=e.length;i<r;++i)"#text"!==e[i].nodeName&&t(e[i])},nodeListToHash:function(e,t){for(var i,r={},n=0;n<e.length;n++){"#text"!==e[n].nodeName&&(r[(i=t(e[n])).key]=i.value)}return r},namedNodeMapToObject:function(e){for(var t={},i=0;i<e.length;i++)t[e[i].name]=e[i].value;return t},getFirstElementByTagNS:function(e,t,i){var r=e.getElementsByTagName(t+":"+i)[0];return r=(r=r||e.getElementsByTagNameNS(t,i)[0])||e.getElementsByTagName(i)[0]},getAttributeNS:function(e,t,i){var r=e.getAttribute(t+":"+i);return r===n&&(r=e.getAttributeNS(t,i)),r===n&&(r=e.getAttribute(i)),r},enforceType:function(e,t){switch(e){case"boolean":t="true"===t;break;case"integer":case"long":case"float":case"double":t=+t;break;case"liststring":t=t?t.split("|"):[]}return t},getRGB:function(e){return e[3]?"rgba("+e.join(",")+")":"rgb("+e.slice(0,-1).join(",")+")"}};function i(e){var n={};n.els={root:e.getElementsByTagName("gexf")[0],graph:e.getElementsByTagName("graph")[0],meta:e.getElementsByTagName("meta")[0],nodes:e.getElementsByTagName("node"),edges:e.getElementsByTagName("edge"),model:p.getModelTags(e)},n.hasViz=!!p.getAttributeNS(n.els.root,"xmlns","viz"),n.version=n.els.root.getAttribute("version")||"1.0",n.mode=n.els.graph.getAttribute("mode")||"static";var t=n.els.graph.getAttribute("defaultedgetype");function i(e){var r=[];return n.els.model[e]&&p.nodeListEach(n.els.model[e],function(e){var t={id:e.getAttribute("id")||e.getAttribute("for"),type:e.getAttribute("type")||"string",title:e.getAttribute("title")||""},i=p.nodeListToArray(e.childNodes);0<i.length&&(t.defaultValue=i[0].textContent),r.push(t)}),0<r.length&&r}function a(e,t){var i={},r=t.getElementsByTagName("attvalue"),n=p.nodeListToHash(r,function(e){var t=p.namedNodeMapToObject(e.attributes);return{key:t.id||t.for,value:t.value}});return e.map(function(e){i[e.id]=!(e.id in n)&&"defaultValue"in e?p.enforceType(e.type,e.defaultValue):p.enforceType(e.type,n[e.id])}),i}n.defaultEdgetype=t||"undirected";var o,s,u,g,l,r,d=i("node"),c=i("edge"),f={version:n.version,mode:n.mode,defaultEdgeType:n.defaultEdgetype,meta:(r={},n.els.meta&&(r.lastmodifieddate=n.els.meta.getAttribute("lastmodifieddate"),p.nodeListEach(n.els.meta.childNodes,function(e){r[e.tagName.toLowerCase()]=e.textContent})),r),model:{},nodes:(g=d,l=[],p.nodeListEach(n.els.nodes,function(e){var t,i,r={id:e.getAttribute("id"),label:e.getAttribute("label")||""};g&&(r.attributes=a(g,e)),n.hasViz&&(r.viz=function(e){var t,i={},r=p.getFirstElementByTagNS(e,"viz","color");r&&(t=["r","g","b","a"].map(function(e){return r.getAttribute(e)}),i.color=p.getRGB(t));var n=p.getFirstElementByTagNS(e,"viz","position");n&&(i.position={},["x","y","z"].map(function(e){i.position[e]=+n.getAttribute(e)}));var a=p.getFirstElementByTagNS(e,"viz","size");a&&(i.size=+a.getAttribute("value"));var o=p.getFirstElementByTagNS(e,"viz","shape");return o&&(i.shape=o.getAttribute("value")),i}(e)),l.push((i={id:(t=r).id,label:t.label},t.viz&&(i.viz=t.viz),t.attributes&&(i.attributes=t.attributes),i))}),l),edges:(o=c,s=n.defaultEdgetype,u=[],p.nodeListEach(n.els.edges,function(e){var t,i,r=p.namedNodeMapToObject(e.attributes);"type"in r||(r.type=s),o&&(r.attributes=a(o,e)),n.hasViz&&(r.viz=function(e){var t,i={},r=p.getFirstElementByTagNS(e,"viz","color");r&&(t=["r","g","b","a"].map(function(e){return r.getAttribute(e)}),i.color=p.getRGB(t));var n=p.getFirstElementByTagNS(e,"viz","shape");n&&(i.shape=n.getAttribute("value"));var a=p.getFirstElementByTagNS(e,"viz","thickness");return a&&(i.thickness=+a.getAttribute("value")),i}(e)),u.push((i={id:(t=r).id,type:t.type||"undirected",label:t.label||"",source:t.source,target:t.target,weight:+t.weight||1},t.viz&&(i.viz=t.viz),t.attributes&&(i.attributes=t.attributes),i))}),u)};return d&&(f.model.node=d),c&&(f.model.edge=c),f}function r(e,t){var i=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var e,t;if(window.ActiveXObject)for(t in e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"])try{return new ActiveXObject(e[t])}catch(e){}return null}();if(!i)throw"XMLHttpRequest not supported, cannot load the file.";var r="function"==typeof t,n=i.overrideMimeType?(i.overrideMimeType("text/xml"),function(e){return e.responseXML}):function(e){return(new DOMParser).parseFromString(e.responseText,"application/xml")};return i.open("GET",e,r),r&&(i.onreadystatechange=function(){4===i.readyState&&t(n(i))}),i.send(),r?i:n(i)}if(void 0!==this.gexf)throw'gexf: error - a variable called "gexf" already exists in the global scope';this.gexf={parse:i,fetch:function(e,t){return"function"==typeof t?r(e,function(e){t(i(e))}):i(r(e))},version:"0.1.1"},"undefined"!=typeof exports&&this.exports!==exports&&(module.exports=this.gexf)}).call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.parsers");var u=0;sigma.parsers.gexf=function(e,t,i){var r,n,a,o;function s(e){for(a=e.nodes,r=0,n=a.length;r<n;r++)(o=a[r]).id=o.id,o.viz&&"object"==typeof o.viz&&(o.viz.position&&"object"==typeof o.viz.position&&(o.x=o.viz.position.x,o.y=-o.viz.position.y),o.size=o.viz.size,o.color=o.viz.color,o.viz.shape&&(o.type=o.viz.shape));for(a=e.edges,r=0,n=a.length;r<n;r++)(o=a[r]).id="string"==typeof o.id?o.id:"e"+u++,o.source=""+o.source,o.target=""+o.target,o.viz&&"object"==typeof o.viz&&(o.color=o.viz.color,o.size=o.viz.thickness),o.size=o.weight,o.direction=o.type,delete o.type;if(t instanceof sigma){for(t.graph.clear(),a=e.nodes,r=0,n=a.length;r<n;r++)t.graph.addNode(a[r]);for(a=e.edges,r=0,n=a.length;r<n;r++)t.graph.addEdge(a[r])}else"object"==typeof t?(t.graph=e,t=new sigma(t)):"function"==typeof t&&(i=t,t=null);return i?void i(t||e):e}if("string"==typeof e)gexf.fetch(e,s);else if("object"==typeof e)return s(gexf.parse(e))}}.call(this);